<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eternal Watchers — Карты и Призы</title>
  <style>
:root{
  --bg:#0b0e12; --card:#12161c; --txt:#e8eef6; --sub:#9fb3c8; --accent:#ffd24d;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--txt);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
a{color:#8fc7ff;text-decoration:none}
a:hover{text-decoration:underline}

.container{max-width:1200px;margin:0 auto;padding:20px}

h1{margin:0 0 16px 0;font-size:28px}
h2{margin:24px 0 12px 0;font-size:22px;color:var(--accent)}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}

.prize-card{background:var(--card);border-radius:12px;padding:12px;text-align:center;position:relative}
.prize-img{width:100%;aspect-ratio:3/4;background:#0f1114;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;margin-bottom:8px}
.fluid-media{width:100%;height:100%;object-fit:cover;display:block;border-radius:10px}

.prize-title{font-weight:700;margin:6px 0 2px 0}
.prize-author{color:var(--sub);font-size:12px;margin:2px 0}

.author-card{background:var(--card);border-radius:12px;padding:8px;display:block}
.author-card .imgwrap{width:100%;aspect-ratio:3/4;background:#0f1114;border-radius:10px;overflow:hidden;display:flex;align-items:center;justify-content:center;margin-bottom:6px}
.author-card img,.author-card video{width:100%;height:100%;object-fit:cover;display:block;border-radius:10px}
.author-card-num{color:var(--sub);font-size:12px}
</style>
</head>
<body>
  <section class="container">
    <h1>Карта фонда (Призы)</h1>
    <div class='grid'></div>
  </section>
  
<section class="container" id="participants">
  <h2>Карты участников</h2>
  <div id="part-cards" class="grid"></div>
</section>
<script>
(function(){
  function esc(s){return (s||"").replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m]))}
  function cardHTML(card, idx){
    const cover = esc(card.cover||"");
    let media;
    if (cover.endsWith(".webm")) {
      media = `<video class="fluid-media" playsinline muted autoplay loop preload="metadata">
                 <source src="${cover}" type="video/webm">
               </video>`;
    } else {
      media = `<img class="fluid-media" src="${cover}" alt="card ${idx+1}">`;
    }
    return `<a class="author-card" href="#" target="_blank">
              <div class="imgwrap">${media}</div>
              <div class="author-card-num">№${idx+1}</div>
            </a>`;
  }

  // Данные можно заменить на реальные: ячейки формируются одинаково
  const sample = window.__SAMPLE_PARTS__ || [
    {"cover":"https://remanga.org/media/card-item/cover_18b5a569.webm"},
    {"cover":"https://remanga.org/media/cards/sample.webp"}
  ];
  const root = document.getElementById("part-cards");
  root.innerHTML = sample.map(cardHTML).join("");
})();
</script>

</body>
</html>
